{% extends "base.html" %}

{% block content %}
<div class="bg-white p-8 rounded-xl shadow-2xl text-center">
    
    <h2 class="text-3xl font-bold text-gray-800 mb-6">í†µê³„ ê¸°ë°˜ ë¡œë˜ ë²ˆí˜¸ ì¶”ì²œ</h2>

    {% if session.username %}
        <p class="text-lg text-gray-600 mb-6">{{ session.username }}ë‹˜, í†µê³„ ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒ íšŒì°¨ ì¶”ì²œ ë²ˆí˜¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
    {% else %}
        <p class="text-lg text-red-500 mb-6">ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²Œë§Œ ë²ˆí˜¸ ì¶”ì²œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. <a href="{{ url_for('login') }}" class="text-purple-600 hover:text-purple-800 font-semibold underline">ë¡œê·¸ì¸í•˜ê¸°</a></p>
        {% set is_success = False %}
    {% endif %}

    {% if is_success %}
        <!-- ìµœì¢… ì¶”ì²œ ë²ˆí˜¸ ì¹´ë“œ -->
        <div class="border-2 border-purple-400 p-6 mb-8 bg-purple-50 rounded-xl shadow-inner">
            <h3 class="text-2xl font-extrabold text-purple-700 mb-4">â­ ìµœì¢… ì¶”ì²œ ë²ˆí˜¸ â­</h3>
            {% if recommended_numbers %}
                <div class="flex justify-center flex-wrap gap-4">
                    {% for num in recommended_numbers %}
                        <span class="flex items-center justify-center w-12 h-12 rounded-full bg-purple-600 text-white text-xl font-bold shadow-lg transform transition duration-150 hover:scale-110">
                            {{ num }}
                        </span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <!-- ìƒì„¸ ë¶„ì„ í…Œì´ë¸” -->
        <h3 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">ì¶”ì²œ ë²ˆí˜¸ ìƒì„¸ ë¶„ì„ (VIEW í™œìš©)</h3>
        <p class="text-sm text-gray-500 mb-6">ì¶”ì²œ ì ìˆ˜(Total Score)ëŠ” ë¹ˆë„ ìˆœìœ„(Hot)ì™€ ë¯¸ì¶œí˜„ ê°„ê²© ìˆœìœ„(Cold)ë¥¼ í•©ì‚°í•œ ê°’ì…ë‹ˆë‹¤. ì ìˆ˜ê°€ ë‚®ì„ìˆ˜ë¡ ì¶”ì²œ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŠµë‹ˆë‹¤.</p>
        
        <div class="overflow-x-auto">
            <table class="min-w-full table-auto border-collapse shadow-md rounded-lg overflow-hidden">
                <thead>
                    <tr class="bg-gray-200 text-gray-700 uppercase text-sm leading-normal">
                        <th class="py-3 px-6 text-center">ë²ˆí˜¸ (Number)</th>
                        <th class="py-3 px-6 text-center">ì´ ì¶”ì²œ ì ìˆ˜ (Total Score)</th>
                        <th class="py-3 px-6 text-center">ë¹ˆë„ (Frequency)</th>
                        <th class="py-3 px-6 text-center">ë¯¸ì¶œí˜„ ê°„ê²© (Last Draw Gap)</th>
                    </tr>
                </thead>
                <tbody class="text-gray-700 text-sm font-light">
                    {% for number, total_score, frequency, last_draw_gap in detailed_stats %}
                    <tr class="border-b border-gray-200 hover:bg-gray-50">
                        <td class="py-3 px-6 text-center font-bold text-purple-600">{{ number }}</td>
                        <td class="py-3 px-6 text-center font-bold text-green-600">{{ total_score | round(2) }}</td>
                        <td class="py-3 px-6 text-center">{{ frequency }}</td>
                        <td class="py-3 px-6 text-center">{{ last_draw_gap }}íšŒì°¨</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        {% if session.username and recommended_numbers %}
            <form action="{{ url_for('save_recommended_pick') }}" method="POST">
                {% for num in recommended_numbers %}
                    <input type="hidden" name="number_{{ loop.index }}" value="{{ num }}">
                {% endfor %}
                
                <button type="submit"
                        class="mt-6 px-8 py-3 bg-blue-500 text-white font-bold rounded-lg shadow-lg hover:bg-blue-600 transition duration-150 transform hover:scale-105">
                    ì´ ë²ˆí˜¸ ë‚˜ì˜ ëª©ë¡ì— ì €ì¥í•˜ê¸°
                </button>
            </form>
        {% endif %}

    {% elif is_success == False and numbers %}
        <p class="text-xl text-red-600 font-semibold mt-6">{{ numbers }}</p>
    {% endif %}

    {% if recommended_numbers %}
<div class="mt-10 p-6 bg-gray-50 border border-gray-200 rounded-xl shadow-sm">
    <h3 class="text-2xl font-bold text-gray-800 mb-4 border-b border-gray-300 pb-2 flex items-center gap-2">
        ğŸ“Š ì¶”ì²œ ëª¨ë¸ì˜ í†µê³„ì  ê·¼ê±°
    </h3>

    <p class="text-gray-700 mb-4">
        ë³¸ ì¶”ì²œ ë²ˆí˜¸ëŠ” ë‹¨ìˆœ ë¬´ì‘ìœ„ê°€ ì•„ë‹Œ, <span class="font-semibold">ì—­ëŒ€ ë¡œë˜ ë‹¹ì²¨ ë°ì´í„° í†µê³„ ë¶„ì„</span>ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
        íŠ¹íˆ, <span class="font-semibold">ë‹¤ê¸°ì¤€ ì˜ì‚¬ê²°ì • ë¶„ì„(MCDA)</span>ì˜ ê°€ì¤‘ ìˆœìœ„ ê¸°ë²•ì„ ì‘ìš©í•œ <span class="font-semibold">í†µê³„ì  ë­í‚¹ ëª¨ë¸</span>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    </p>

    <ul class="list-disc list-inside space-y-2 text-gray-700 pl-4">
        <li>
            <span class="font-semibold">ë¹ˆë„ ë° ê°„ê²© ë¶„ì„:</span>
            ê° ë²ˆí˜¸ì˜ ì¶œí˜„ íšŸìˆ˜(Frequency)ì™€ ë¯¸ì¶œí˜„ ê°„ê²©(Draw Gap)ì„ ê³„ì‚°í•˜ì—¬ ì ìˆ˜ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.
        </li>
        <li>
            <span class="font-semibold">ê°œì¸í™” í•„í„°ë§:</span>
            ì‚¬ìš©ìê°€ ì´ì „ì— ì„ íƒí–ˆë˜ ë¹„ë‹¹ì²¨ ë²ˆí˜¸ë¥¼ ì œì™¸í•˜ëŠ” í–‰ë™ ê²½ì œí•™ì  í¸í–¥ì„ ì ìš©í•˜ì—¬ ë§ì¶¤ ì¶”ì²œì„ ì œê³µí•©ë‹ˆë‹¤.
        </li>
    </ul>

    <div class="mt-6 pt-4 border-t border-gray-200">
    <h4 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
        ğŸ“š ì°¸ê³  ìë£Œ
    </h4>
    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
        <li>
            <span class="font-medium">[í™•ë¥  ëª¨ë¸]</span> 
            <a href="https://arxiv.org/html/2403.12836v1" target="_blank" class="text-blue-600 hover:underline">
                Compound-Dirichlet-Multinomial, Predicting Winning Lottery Numbers (Nkomozake, arXiv, 2024)
            </a>
        </li>
        <li>
            <span class="font-medium">[í–‰ë™ ê²½ì œí•™]</span> 
            <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=1794126" target="_blank" class="text-blue-600 hover:underline">
                í”Œë ˆì´ì–´ ì„ íƒ í¸í–¥ ë¶„ì„, Predicting Lotto Numbers (Tyran et al., 2011)
            </a>
        </li>
        <li>
            <span class="font-medium">[ë°ì´í„°ë§ˆì´ë‹]</span> 
            <a href="https://www.sciencedirect.com/science/article/abs/pii/S0957417423025654" target="_blank" class="text-blue-600 hover:underline">
                ìœ ë¦¬í•œ ì­íŒŸ ì¡°ê±´ íƒì§€, Mining a lottery for a favorable jackpot (2024)
            </a>
        </li>
        <li>
            <span class="font-medium">[ë¬¼ë¦¬/í†µê³„ ëª¨ë¸]</span> 
            <a href="https://www.researchgate.net/publication/378304416_Jackpot_statistics_a_physicist%27s_approach" target="_blank" class="text-blue-600 hover:underline">
                ì­íŒŸ ì‹œê³„ì—´ ë¶„ì„, Jackpot statistics, a physicist's approach (2024)
            </a>
        </li>
        <li>
            <span class="font-medium">[ì‹¤ë¬´/ì»¤ë®¤ë‹ˆí‹° êµ¬í˜„]</span> 
            <a href="https://github.com/Ahmad-Alam/Lottery-Prediction" target="_blank" class="text-blue-600 hover:underline">
                ML ê¸°ë°˜ ë¡œë˜ ì˜ˆì¸¡ ì˜ˆì œ, GitHub / ë¸”ë¡œê·¸ ë“±
            </a>
        </li>
    </ul>
</div>
</div>
{% endif %}


</div>
{% endblock %}